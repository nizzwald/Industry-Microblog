/* Most of the code from MenÃ©ame by Ricardo Galli */

function tooltip(){}
tooltip.id="tooltip";tooltip.main=null;tooltip.offsetx=10;tooltip.offsety=10;tooltip.shoffsetx=8;tooltip.shoffsety=8;tooltip.x=0;tooltip.y=0;tooltip.tooltipShadow=null;tooltip.tooltipText=null;tooltip.title_saved='';tooltip.saveonmouseover=null;tooltip.timeout=null;tooltip.active=false;tooltip.cache=new JSOC();tooltip.ie=(document.all)?true:false;if(tooltip.ie)tooltip.ie5=(navigator.userAgent.indexOf('MSIE 5')>0);else tooltip.ie5=false;tooltip.dom2=((document.getElementById)&&!(tooltip.ie5))?true:false;tooltip.show=function(event,text){if(this.dom2==false)return false;if(this.tooltipShadow==null){this.tooltipShadow=document.createElement("div");this.tooltipShadow.setAttribute("id","tooltip-shadow");document.body.appendChild(tooltip.tooltipShadow);this.tooltipText=document.createElement("div");this.tooltipText.setAttribute("id","tooltip-text");document.body.appendChild(this.tooltipText);}
this.saveonmouseover=document.onmousemove;document.onmousemove=this.mouseMove;this.mouseMove(event);this.setText(text);this.tooltipText.style.visibility="visible";this.tooltipShadow.style.visibility="visible";this.active=true;return false;}
tooltip.setText=function(text){tooltip.tooltipShadow.style.width=0+"px";tooltip.tooltipShadow.style.height=0+"px";this.tooltipText.innerHTML=text;setTimeout('tooltip.setShadow()',1);return false;}
tooltip.setShadow=function(){tooltip.tooltipShadow.style.width=tooltip.tooltipText.clientWidth+"px";tooltip.tooltipShadow.style.height=tooltip.tooltipText.clientHeight+"px";}
tooltip.hide=function(event){if(this.dom2==false)return false;document.onmousemove=this.saveonmouseover;this.saveonmouseover=null;if(this.tooltipShadow!=null){this.tooltipText.style.visibility="hidden";this.tooltipShadow.style.visibility="hidden";this.tooltipText.innerHTML='';}
this.active=false;}
tooltip.mouseMove=function(e){if(tooltip.ie){tooltip.x=event.clientX;tooltip.y=event.clientY;}else{tooltip.x=e.pageX;tooltip.y=e.pageY;}
tooltip.moveTo(tooltip.x+tooltip.offsetx,tooltip.y+tooltip.offsety);}
tooltip.moveTo=function(xL,yL){if(this.ie){xL+=document.documentElement.scrollLeft;yL+=document.documentElement.scrollTop;}
if(this.tooltipText.clientWidth>0&&document.documentElement.clientWidth>0&&xL>document.documentElement.clientWidth*0.55){xL=xL-this.tooltipText.clientWidth-2*this.offsetx;}
this.tooltipText.style.left=xL+"px";this.tooltipText.style.top=yL+"px";xLS=xL+this.shoffsetx;yLS=yL+this.shoffsety;this.tooltipShadow.style.left=xLS+"px";this.tooltipShadow.style.top=yLS+"px";}
tooltip.ajax_delayed=function(event,script,id,maxcache){maxcache=maxcache||600000;if(this.active)return false;if((object=this.cache.get(script+id))!=undefined){json=object[script+id];var show='';if(json['type']=='profile'){if(json['error'])show='<span class="tooltip_bold">'+translations[24]+'</span> '+translations[25];else{if(json['realname'])show='<span class="tooltip_bold">'+translations[26]+'</span> '+json['realname']+'<br />';if(json['url'])show+='<span class="tooltip_bold">'+translations[29]+'</span> '+json['url']+'<br />';if(json['location'])show+='<span class="tooltip_bold">'+translations[27]+'</span> '+json['location']+'<br />';if(json['bio'])show+='<span class="tooltip_bold">'+translations[28]+'</span> '+json['bio']+'<br />';show+='<span class="tooltip_bold">'+translations[30]+'</span> '+json['since']+'<br />';}}
if(json.type=='note'){if(json.error!==undefined)show='<span class="tooltip_bold">'+translations[24]+'</span> '+translations[25];else{var show='<div style="padding:2 0 0 2;"><span class="tooltip_bold">'+translations[31]+'</span> '+json['text']+'</div>';}}
tooltip.show(event,show);}else{this.show(event,translations[0]);this.timeout=setTimeout("tooltip.ajax_request('"+script+"', '"+id+"', "+maxcache+")",100);}}
tooltip.ajax_request=function(script,id,maxcache){var url=baseURL.replace('%s','ajax').replace('%i',script).replace('%d',id);tooltip.timeout=null;$.getJSON(url,function(json){tooltip.cache.set(script+id,json,{'ttl':maxcache});var show='';if(json['type']=='profile'){if(json['error'])show='<span class="tooltip_bold">'+translations[24]+'</span> '+translations[25]+'</span>';else{if(json['realname'])show='<span class="tooltip_bold">'+translations[26]+'</span> '+json['realname']+'<br />';if(json['url'])show+='<span class="tooltip_bold">'+translations[29]+'</span> '+json['url']+'<br />';if(json['location'])show+='<span class="tooltip_bold">'+translations[27]+'</span> '+json['location']+'<br />';show+='<span class="tooltip_bold">'+translations[30]+'</span> '+json['since']+'<br />';}}
if(json.type=='note'){if(json.error!==undefined)var show='<span class="tooltip_bold">'+translations[24]+'</span> '+translations[25];else{var show='<div style="padding:2 0 0 2;"><span class="tooltip_bold">'+translations[31]+'</span> '+json['text']+'</div>';}}
tooltip.setText(show);});}